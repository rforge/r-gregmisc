
R version 2.4.1 (2006-12-18)
Copyright (C) 2006 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(SASxport)

Loaded SASxport version 1.1.1 (2007-09-25).

  Updates and technical support available from Random Technologies, LLC
  <http://random-technologies-llc.com/products/SASxport>

  Type `?SASxport' for usage information.

> 
> 
> ##tests
> example(read.xport)

rd.xpr> host <- "http://biostat.mc.vanderbilt.edu"

rd.xpr> path <- "/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt"

rd.xpr> url <- paste(host, path, sep = "")

rd.xpr> w <- read.xport(url)

rd.xpr> w <- read.xport(url, as.list = TRUE)

rd.xpr> w <- read.xport(url, as.list = TRUE, include.formats = TRUE)

rd.xpr> SASxport:::assert(is.data.frame(w) == FALSE && is.list(w) == 
    TRUE)
> write.xport(w$test,file="a.xpt")
Warning message:
Data frame names modified to obey SAS rules in: write.xport(w$test, file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

> 
> b <- w$test
> write.xport(b,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `B':
       dataset name      type format width                     label nobs
B.RACE       B RACE character   RACE     8                              2
B.AGE        B  AGE   numeric            8 Age at Beginning of Study    2
B.D1         B   D1   numeric            8                              2
B.DT1        B  DT1   numeric            8                              2
B.T1         B   T1   numeric            8                              2

> 
> write.xport(test=w$test,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name      type format width                     label nobs
TEST.RACE    TEST RACE character   RACE     8                              2
TEST.AGE     TEST  AGE   numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1   numeric            8                              2
TEST.DT1     TEST  DT1   numeric            8                              2
TEST.T1      TEST   T1   numeric            8                              2

> 
> write.xport(test=w$test,z=w$z,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name      type format width                     label nobs
TEST.RACE    TEST RACE character   RACE     8                              2
TEST.AGE     TEST  AGE   numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1   numeric            8                              2
TEST.DT1     TEST  DT1   numeric            8                              2
TEST.T1      TEST   T1   numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

> 
> write.xport(w$test,w$z,file="a.xpt")
Warning message:
Data frame names modified to obey SAS rules in: write.xport(w$test, w$z, file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

Variables in data set `W.Z':
       dataset name    type format width label nobs
W.Z.X3     W.Z   X3 numeric            8        100
W.Z.X4     W.Z   X4 numeric            8        100
W.Z.X5     W.Z   X5 numeric            8        100
W.Z.X6     W.Z   X6 numeric            8        100
W.Z.X7     W.Z   X7 numeric            8        100
W.Z.X8     W.Z   X8 numeric            8        100

> 
> write.xport(w$test,z=w$z,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

> 
> write.xport(list=w,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name    type format width                     label nobs
TEST.RACE    TEST RACE numeric   RACE     8                              2
TEST.AGE     TEST  AGE numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1 numeric            8                              2
TEST.DT1     TEST  DT1 numeric            8                              2
TEST.T1      TEST   T1 numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8          3
FORMATS.START    FORMATS    START character           16          3
FORMATS.END      FORMATS      END character           16          3
FORMATS.LABEL    FORMATS    LABEL character            8          3
FORMATS.MIN      FORMATS      MIN   numeric            8          3
FORMATS.MAX      FORMATS      MAX   numeric            8          3
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8          3
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8          3
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8          3
FORMATS.PREFIX   FORMATS   PREFIX character            8          3
FORMATS.MULT     FORMATS     MULT   numeric            8          3
FORMATS.FILL     FORMATS     FILL character            8          3
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8          3
FORMATS.TYPE     FORMATS     TYPE character            8          3
FORMATS.SEXCL    FORMATS    SEXCL character            8          3
FORMATS.EEXCL    FORMATS    EEXCL character            8          3
FORMATS.HLO      FORMATS      HLO character            8          3
FORMATS.DECSEP   FORMATS   DECSEP character            8          3
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8          3
FORMATS.DATATYPE FORMATS DATATYPE character            8          3
FORMATS.LANGUAGE FORMATS LANGUAGE character            8          3

> 
> names(w) <- NULL
> write.xport(w[[1]],w[[2]],file="a.xpt")
Warning message:
Data frame names modified to obey SAS rules in: write.xport(w[[1]], w[[2]], file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W..1..':
            dataset name      type format width                     label nobs
W..1...RACE  W..1.. RACE character   RACE     8                              2
W..1...AGE   W..1..  AGE   numeric            8 Age at Beginning of Study    2
W..1...D1    W..1..   D1   numeric            8                              2
W..1...DT1   W..1..  DT1   numeric            8                              2
W..1...T1    W..1..   T1   numeric            8                              2

Variables in data set `W..2..':
          dataset name    type format width label nobs
W..2...X3  W..2..   X3 numeric            8        100
W..2...X4  W..2..   X4 numeric            8        100
W..2...X5  W..2..   X5 numeric            8        100
W..2...X6  W..2..   X6 numeric            8        100
W..2...X7  W..2..   X7 numeric            8        100
W..2...X8  W..2..   X8 numeric            8        100

> 
> names(w) <- NULL
> write.xport(list=w,file="a.xpt")
Warning message:
Replacing missing or invalid dataset names in: write.xport(list = w, file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

Variables in data set `DATA3':
               dataset     name    type format width label nobs
DATA3.FMTNAME    DATA3  FMTNAME numeric  RFMTA     8          3
DATA3.START      DATA3    START numeric  RFMTB     8          3
DATA3.END        DATA3      END numeric  RFMTC     8          3
DATA3.LABEL      DATA3    LABEL numeric  RFMTD     8          3
DATA3.MIN        DATA3      MIN numeric            8          3
DATA3.MAX        DATA3      MAX numeric            8          3
DATA3.DEFAULT    DATA3  DEFAULT numeric            8          3
DATA3.LENGTH     DATA3   LENGTH numeric            8          3
DATA3.FUZZ       DATA3     FUZZ numeric            8          3
DATA3.PREFIX     DATA3   PREFIX numeric  RFMTE     8          3
DATA3.MULT       DATA3     MULT numeric            8          3
DATA3.FILL       DATA3     FILL numeric  RFMTF     8          3
DATA3.NOEDIT     DATA3   NOEDIT numeric            8          3
DATA3.TYPE       DATA3     TYPE numeric  RFMTG     8          3
DATA3.SEXCL      DATA3    SEXCL numeric  RFMTH     8          3
DATA3.EEXCL      DATA3    EEXCL numeric  RFMTI     8          3
DATA3.HLO        DATA3      HLO numeric  RFMTJ     8          3
DATA3.DECSEP     DATA3   DECSEP numeric RFMTBA     8          3
DATA3.DIG3SEP    DATA3  DIG3SEP numeric RFMTBB     8          3
DATA3.DATATYPE   DATA3 DATATYPE numeric RFMTBC     8          3
DATA3.LANGUAGE   DATA3 LANGUAGE numeric RFMTBD     8          3

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8         20
FORMATS.START    FORMATS    START character            8         20
FORMATS.END      FORMATS      END character            8         20
FORMATS.LABEL    FORMATS    LABEL character           16         20
FORMATS.MIN      FORMATS      MIN   numeric            8         20
FORMATS.MAX      FORMATS      MAX   numeric            8         20
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8         20
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8         20
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8         20
FORMATS.PREFIX   FORMATS   PREFIX character            8         20
FORMATS.MULT     FORMATS     MULT   numeric            8         20
FORMATS.FILL     FORMATS     FILL character            8         20
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8         20
FORMATS.TYPE     FORMATS     TYPE character            8         20
FORMATS.SEXCL    FORMATS    SEXCL character            8         20
FORMATS.EEXCL    FORMATS    EEXCL character            8         20
FORMATS.HLO      FORMATS      HLO character            8         20
FORMATS.DECSEP   FORMATS   DECSEP character            8         20
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8         20
FORMATS.DATATYPE FORMATS DATATYPE character            8         20
FORMATS.LANGUAGE FORMATS LANGUAGE character            8         20

> 
> ### Check that we catch invalid parameters
> failure <- try( write.xport(5,"a.xpt") )
Error in write.xport(5, "a.xpt") : '5', 'a.xpt' are not data.frame objects.
> SASxport:::assert( "try-error" %in% class(failure) )
> 
> failure <- try( write.xport(list(a=5,b=6),"a.xpt") )
Error in write.xport(list(a = 5, b = 6), "a.xpt") : 
	'list(a = 5, b = 6)', 'a.xpt' are not data.frame objects.
> SASxport:::assert( "try-error" %in% class(failure) )
> 
> 
> # Check with different list construction function *name*
> example(read.xport)

rd.xpr> host <- "http://biostat.mc.vanderbilt.edu"

rd.xpr> path <- "/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt"

rd.xpr> url <- paste(host, path, sep = "")

rd.xpr> w <- read.xport(url)

rd.xpr> w <- read.xport(url, as.list = TRUE)

rd.xpr> w <- read.xport(url, as.list = TRUE, include.formats = TRUE)

rd.xpr> SASxport:::assert(is.data.frame(w) == FALSE && is.list(w) == 
    TRUE)
> write.xport(list=base::list(w$test,w$z),file="a.xpt")
Warning message:
Replacing missing or invalid dataset names in: write.xport(list = base::list(w$test, w$z), file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

> 
> # remove names
> example(read.xport)

rd.xpr> host <- "http://biostat.mc.vanderbilt.edu"

rd.xpr> path <- "/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt"

rd.xpr> url <- paste(host, path, sep = "")

rd.xpr> w <- read.xport(url)

rd.xpr> w <- read.xport(url, as.list = TRUE)

rd.xpr> w <- read.xport(url, as.list = TRUE, include.formats = TRUE)

rd.xpr> SASxport:::assert(is.data.frame(w) == FALSE && is.list(w) == 
    TRUE)
> names(w) <- NULL
> write.xport(list=w,file="a.xpt")
Warning message:
Replacing missing or invalid dataset names in: write.xport(list = w, file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

Variables in data set `DATA3':
               dataset     name    type format width label nobs
DATA3.FMTNAME    DATA3  FMTNAME numeric  RFMTA     8          3
DATA3.START      DATA3    START numeric  RFMTB     8          3
DATA3.END        DATA3      END numeric  RFMTC     8          3
DATA3.LABEL      DATA3    LABEL numeric  RFMTD     8          3
DATA3.MIN        DATA3      MIN numeric            8          3
DATA3.MAX        DATA3      MAX numeric            8          3
DATA3.DEFAULT    DATA3  DEFAULT numeric            8          3
DATA3.LENGTH     DATA3   LENGTH numeric            8          3
DATA3.FUZZ       DATA3     FUZZ numeric            8          3
DATA3.PREFIX     DATA3   PREFIX numeric  RFMTE     8          3
DATA3.MULT       DATA3     MULT numeric            8          3
DATA3.FILL       DATA3     FILL numeric  RFMTF     8          3
DATA3.NOEDIT     DATA3   NOEDIT numeric            8          3
DATA3.TYPE       DATA3     TYPE numeric  RFMTG     8          3
DATA3.SEXCL      DATA3    SEXCL numeric  RFMTH     8          3
DATA3.EEXCL      DATA3    EEXCL numeric  RFMTI     8          3
DATA3.HLO        DATA3      HLO numeric  RFMTJ     8          3
DATA3.DECSEP     DATA3   DECSEP numeric RFMTBA     8          3
DATA3.DIG3SEP    DATA3  DIG3SEP numeric RFMTBB     8          3
DATA3.DATATYPE   DATA3 DATATYPE numeric RFMTBC     8          3
DATA3.LANGUAGE   DATA3 LANGUAGE numeric RFMTBD     8          3

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8         20
FORMATS.START    FORMATS    START character            8         20
FORMATS.END      FORMATS      END character            8         20
FORMATS.LABEL    FORMATS    LABEL character           16         20
FORMATS.MIN      FORMATS      MIN   numeric            8         20
FORMATS.MAX      FORMATS      MAX   numeric            8         20
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8         20
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8         20
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8         20
FORMATS.PREFIX   FORMATS   PREFIX character            8         20
FORMATS.MULT     FORMATS     MULT   numeric            8         20
FORMATS.FILL     FORMATS     FILL character            8         20
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8         20
FORMATS.TYPE     FORMATS     TYPE character            8         20
FORMATS.SEXCL    FORMATS    SEXCL character            8         20
FORMATS.EEXCL    FORMATS    EEXCL character            8         20
FORMATS.HLO      FORMATS      HLO character            8         20
FORMATS.DECSEP   FORMATS   DECSEP character            8         20
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8         20
FORMATS.DATATYPE FORMATS DATATYPE character            8         20
FORMATS.LANGUAGE FORMATS LANGUAGE character            8         20

> 
> # remove variable names
> example(read.xport)

rd.xpr> host <- "http://biostat.mc.vanderbilt.edu"

rd.xpr> path <- "/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt"

rd.xpr> url <- paste(host, path, sep = "")

rd.xpr> w <- read.xport(url)

rd.xpr> w <- read.xport(url, as.list = TRUE)

rd.xpr> w <- read.xport(url, as.list = TRUE, include.formats = TRUE)

rd.xpr> SASxport:::assert(is.data.frame(w) == FALSE && is.list(w) == 
    TRUE)
> colnames(w[[2]]) <- rep("", length=ncol(w[[2]]))
> write.xport(list=w,file="a.xpt")
Warning message:
Unnamed variables detected, using default names in: write.xport(list = w, file = "a.xpt") 
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name    type format width                     label nobs
TEST.RACE    TEST RACE numeric   RACE     8                              2
TEST.AGE     TEST  AGE numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1 numeric            8                              2
TEST.DT1     TEST  DT1 numeric            8                              2
TEST.T1      TEST   T1 numeric            8                              2

Variables in data set `Z':
       dataset name    type format width label nobs
Z.VAR1       Z VAR1 numeric            8        100
Z.VAR2       Z VAR2 numeric            8        100
Z.VAR3       Z VAR3 numeric            8        100
Z.VAR4       Z VAR4 numeric            8        100
Z.VAR5       Z VAR5 numeric            8        100
Z.VAR6       Z VAR6 numeric            8        100

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8          3
FORMATS.START    FORMATS    START character           16          3
FORMATS.END      FORMATS      END character           16          3
FORMATS.LABEL    FORMATS    LABEL character            8          3
FORMATS.MIN      FORMATS      MIN   numeric            8          3
FORMATS.MAX      FORMATS      MAX   numeric            8          3
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8          3
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8          3
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8          3
FORMATS.PREFIX   FORMATS   PREFIX character            8          3
FORMATS.MULT     FORMATS     MULT   numeric            8          3
FORMATS.FILL     FORMATS     FILL character            8          3
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8          3
FORMATS.TYPE     FORMATS     TYPE character            8          3
FORMATS.SEXCL    FORMATS    SEXCL character            8          3
FORMATS.EEXCL    FORMATS    EEXCL character            8          3
FORMATS.HLO      FORMATS      HLO character            8          3
FORMATS.DECSEP   FORMATS   DECSEP character            8          3
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8          3
FORMATS.DATATYPE FORMATS DATATYPE character            8          3
FORMATS.LANGUAGE FORMATS LANGUAGE character            8          3

> 
