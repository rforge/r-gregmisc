
R version 2.6.0 beta (2007-09-24 r42966)
Copyright (C) 2007 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(SASxport)

Loaded SASxport version 1.1.1 (2007-09-25).

  Updates and technical support available from Random Technologies, LLC
  <http://random-technologies-llc.com/contact>

> 
> 
> ##tests
> example(read.xport)

rd.xpr> # -------
rd.xpr> # SAS code to generate test dataset:
rd.xpr> # -------
rd.xpr> # libname y SASV5XPT "test2.xpt";
rd.xpr> #
rd.xpr> # PROC FORMAT; VALUE race 1=green 2=blue 3=purple; RUN;
rd.xpr> # PROC FORMAT CNTLOUT=format;RUN;  * Name, e.g. 'format', unimportant;
rd.xpr> # data test;
rd.xpr> # LENGTH race 3 age 4;
rd.xpr> # age=30; label age="Age at Beginning of Study";
rd.xpr> # race=2;
rd.xpr> # d1='3mar2002'd ;
rd.xpr> # dt1='3mar2002 9:31:02'dt;
rd.xpr> # t1='11:13:45't;
rd.xpr> # output;
rd.xpr> #
rd.xpr> # age=31;
rd.xpr> # race=4;
rd.xpr> # d1='3jun2002'd ;
rd.xpr> # dt1='3jun2002 9:42:07'dt;
rd.xpr> # t1='11:14:13't;
rd.xpr> # output;
rd.xpr> # format d1 mmddyy10. dt1 datetime. t1 time. race race.;
rd.xpr> # run;
rd.xpr> # data z; LENGTH x3 3 x4 4 x5 5 x6 6 x7 7 x8 8;
rd.xpr> #    DO i=1 TO 100;
rd.xpr> #        x3=ranuni(3);
rd.xpr> #        x4=ranuni(5);
rd.xpr> #        x5=ranuni(7);
rd.xpr> #        x6=ranuni(9);
rd.xpr> #        x7=ranuni(11);
rd.xpr> #        x8=ranuni(13);
rd.xpr> #        output;
rd.xpr> #        END;
rd.xpr> #    DROP i;
rd.xpr> #    RUN;
rd.xpr> # PROC MEANS; RUN;
rd.xpr> # PROC COPY IN=work OUT=y;SELECT test format z;RUN; *Creates test2.xpt;
rd.xpr> # ------
rd.xpr> 
rd.xpr> # Read this dataset from a local file:
rd.xpr> ## Not run: 
rd.xpr> ##D w <- read.xport('test2.xpt')
rd.xpr> ## End(Not run)
rd.xpr> 
rd.xpr> # Or read a copy of test2.xpt available on the web:
rd.xpr> host <- 'http://biostat.mc.vanderbilt.edu'

rd.xpr> path <- '/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt'

rd.xpr> url <- paste(host,path,sep="")

rd.xpr> w <- read.xport(url)

rd.xpr> # We can also get the dataset wrapped in a list
rd.xpr> w <- read.xport(url, as.list=TRUE)

rd.xpr> # And we can ask for the format information to be included as well.
rd.xpr> w <- read.xport(url, as.list=TRUE, include.formats=TRUE)

rd.xpr> ## Don't show: 
rd.xpr> SASxport:::assert( is.data.frame(w)==FALSE && is.list(w)==TRUE )
> write.xport(w$test,file="a.xpt")
Warning message:
In write.xport(w$test, file = "a.xpt") :
  Data frame names modified to obey SAS rules
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

> 
> b <- w$test
> write.xport(b,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `B':
       dataset name      type format width                     label nobs
B.RACE       B RACE character   RACE     8                              2
B.AGE        B  AGE   numeric            8 Age at Beginning of Study    2
B.D1         B   D1   numeric            8                              2
B.DT1        B  DT1   numeric            8                              2
B.T1         B   T1   numeric            8                              2

> 
> write.xport(test=w$test,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name      type format width                     label nobs
TEST.RACE    TEST RACE character   RACE     8                              2
TEST.AGE     TEST  AGE   numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1   numeric            8                              2
TEST.DT1     TEST  DT1   numeric            8                              2
TEST.T1      TEST   T1   numeric            8                              2

> 
> write.xport(test=w$test,z=w$z,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name      type format width                     label nobs
TEST.RACE    TEST RACE character   RACE     8                              2
TEST.AGE     TEST  AGE   numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1   numeric            8                              2
TEST.DT1     TEST  DT1   numeric            8                              2
TEST.T1      TEST   T1   numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

> 
> write.xport(w$test,w$z,file="a.xpt")
Warning message:
In write.xport(w$test, w$z, file = "a.xpt") :
  Data frame names modified to obey SAS rules
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

Variables in data set `W.Z':
       dataset name    type format width label nobs
W.Z.X3     W.Z   X3 numeric            8        100
W.Z.X4     W.Z   X4 numeric            8        100
W.Z.X5     W.Z   X5 numeric            8        100
W.Z.X6     W.Z   X6 numeric            8        100
W.Z.X7     W.Z   X7 numeric            8        100
W.Z.X8     W.Z   X8 numeric            8        100

> 
> write.xport(w$test,z=w$z,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W.TEST':
            dataset name      type format width                     label nobs
W.TEST.RACE  W.TEST RACE character   RACE     8                              2
W.TEST.AGE   W.TEST  AGE   numeric            8 Age at Beginning of Study    2
W.TEST.D1    W.TEST   D1   numeric            8                              2
W.TEST.DT1   W.TEST  DT1   numeric            8                              2
W.TEST.T1    W.TEST   T1   numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

> 
> write.xport(list=w,file="a.xpt")
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name    type format width                     label nobs
TEST.RACE    TEST RACE numeric   RACE     8                              2
TEST.AGE     TEST  AGE numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1 numeric            8                              2
TEST.DT1     TEST  DT1 numeric            8                              2
TEST.T1      TEST   T1 numeric            8                              2

Variables in data set `Z':
     dataset name    type format width label nobs
Z.X3       Z   X3 numeric            8        100
Z.X4       Z   X4 numeric            8        100
Z.X5       Z   X5 numeric            8        100
Z.X6       Z   X6 numeric            8        100
Z.X7       Z   X7 numeric            8        100
Z.X8       Z   X8 numeric            8        100

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8          3
FORMATS.START    FORMATS    START character           16          3
FORMATS.END      FORMATS      END character           16          3
FORMATS.LABEL    FORMATS    LABEL character            8          3
FORMATS.MIN      FORMATS      MIN   numeric            8          3
FORMATS.MAX      FORMATS      MAX   numeric            8          3
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8          3
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8          3
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8          3
FORMATS.PREFIX   FORMATS   PREFIX character            8          3
FORMATS.MULT     FORMATS     MULT   numeric            8          3
FORMATS.FILL     FORMATS     FILL character            8          3
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8          3
FORMATS.TYPE     FORMATS     TYPE character            8          3
FORMATS.SEXCL    FORMATS    SEXCL character            8          3
FORMATS.EEXCL    FORMATS    EEXCL character            8          3
FORMATS.HLO      FORMATS      HLO character            8          3
FORMATS.DECSEP   FORMATS   DECSEP character            8          3
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8          3
FORMATS.DATATYPE FORMATS DATATYPE character            8          3
FORMATS.LANGUAGE FORMATS LANGUAGE character            8          3

> 
> names(w) <- NULL
> write.xport(w[[1]],w[[2]],file="a.xpt")
Warning message:
In write.xport(w[[1]], w[[2]], file = "a.xpt") :
  Data frame names modified to obey SAS rules
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `W..1..':
            dataset name      type format width                     label nobs
W..1...RACE  W..1.. RACE character   RACE     8                              2
W..1...AGE   W..1..  AGE   numeric            8 Age at Beginning of Study    2
W..1...D1    W..1..   D1   numeric            8                              2
W..1...DT1   W..1..  DT1   numeric            8                              2
W..1...T1    W..1..   T1   numeric            8                              2

Variables in data set `W..2..':
          dataset name    type format width label nobs
W..2...X3  W..2..   X3 numeric            8        100
W..2...X4  W..2..   X4 numeric            8        100
W..2...X5  W..2..   X5 numeric            8        100
W..2...X6  W..2..   X6 numeric            8        100
W..2...X7  W..2..   X7 numeric            8        100
W..2...X8  W..2..   X8 numeric            8        100

> 
> names(w) <- NULL
> write.xport(list=w,file="a.xpt")
Warning message:
In write.xport(list = w, file = "a.xpt") :
  Replacing missing or invalid dataset names
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

Variables in data set `DATA3':
               dataset     name    type format width label nobs
DATA3.FMTNAME    DATA3  FMTNAME numeric  RFMTA     8          3
DATA3.START      DATA3    START numeric  RFMTB     8          3
DATA3.END        DATA3      END numeric  RFMTC     8          3
DATA3.LABEL      DATA3    LABEL numeric  RFMTD     8          3
DATA3.MIN        DATA3      MIN numeric            8          3
DATA3.MAX        DATA3      MAX numeric            8          3
DATA3.DEFAULT    DATA3  DEFAULT numeric            8          3
DATA3.LENGTH     DATA3   LENGTH numeric            8          3
DATA3.FUZZ       DATA3     FUZZ numeric            8          3
DATA3.PREFIX     DATA3   PREFIX numeric  RFMTE     8          3
DATA3.MULT       DATA3     MULT numeric            8          3
DATA3.FILL       DATA3     FILL numeric  RFMTF     8          3
DATA3.NOEDIT     DATA3   NOEDIT numeric            8          3
DATA3.TYPE       DATA3     TYPE numeric  RFMTG     8          3
DATA3.SEXCL      DATA3    SEXCL numeric  RFMTH     8          3
DATA3.EEXCL      DATA3    EEXCL numeric  RFMTI     8          3
DATA3.HLO        DATA3      HLO numeric  RFMTJ     8          3
DATA3.DECSEP     DATA3   DECSEP numeric RFMTBA     8          3
DATA3.DIG3SEP    DATA3  DIG3SEP numeric RFMTBB     8          3
DATA3.DATATYPE   DATA3 DATATYPE numeric RFMTBC     8          3
DATA3.LANGUAGE   DATA3 LANGUAGE numeric RFMTBD     8          3

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8         20
FORMATS.START    FORMATS    START character            8         20
FORMATS.END      FORMATS      END character            8         20
FORMATS.LABEL    FORMATS    LABEL character           16         20
FORMATS.MIN      FORMATS      MIN   numeric            8         20
FORMATS.MAX      FORMATS      MAX   numeric            8         20
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8         20
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8         20
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8         20
FORMATS.PREFIX   FORMATS   PREFIX character            8         20
FORMATS.MULT     FORMATS     MULT   numeric            8         20
FORMATS.FILL     FORMATS     FILL character            8         20
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8         20
FORMATS.TYPE     FORMATS     TYPE character            8         20
FORMATS.SEXCL    FORMATS    SEXCL character            8         20
FORMATS.EEXCL    FORMATS    EEXCL character            8         20
FORMATS.HLO      FORMATS      HLO character            8         20
FORMATS.DECSEP   FORMATS   DECSEP character            8         20
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8         20
FORMATS.DATATYPE FORMATS DATATYPE character            8         20
FORMATS.LANGUAGE FORMATS LANGUAGE character            8         20

> 
> ### Check that we catch invalid parameters
> failure <- try( write.xport(5,"a.xpt") )
Error in write.xport(5, "a.xpt") : 
  '5', 'a.xpt' are not data.frame objects.
> SASxport:::assert( "try-error" %in% class(failure) )
> 
> failure <- try( write.xport(list(a=5,b=6),"a.xpt") )
Error in write.xport(list(a = 5, b = 6), "a.xpt") : 
  'list(a = 5, b = 6)', 'a.xpt' are not data.frame objects.
> SASxport:::assert( "try-error" %in% class(failure) )
> 
> 
> # Check with different list construction function *name*
> example(read.xport)

rd.xpr> # -------
rd.xpr> # SAS code to generate test dataset:
rd.xpr> # -------
rd.xpr> # libname y SASV5XPT "test2.xpt";
rd.xpr> #
rd.xpr> # PROC FORMAT; VALUE race 1=green 2=blue 3=purple; RUN;
rd.xpr> # PROC FORMAT CNTLOUT=format;RUN;  * Name, e.g. 'format', unimportant;
rd.xpr> # data test;
rd.xpr> # LENGTH race 3 age 4;
rd.xpr> # age=30; label age="Age at Beginning of Study";
rd.xpr> # race=2;
rd.xpr> # d1='3mar2002'd ;
rd.xpr> # dt1='3mar2002 9:31:02'dt;
rd.xpr> # t1='11:13:45't;
rd.xpr> # output;
rd.xpr> #
rd.xpr> # age=31;
rd.xpr> # race=4;
rd.xpr> # d1='3jun2002'd ;
rd.xpr> # dt1='3jun2002 9:42:07'dt;
rd.xpr> # t1='11:14:13't;
rd.xpr> # output;
rd.xpr> # format d1 mmddyy10. dt1 datetime. t1 time. race race.;
rd.xpr> # run;
rd.xpr> # data z; LENGTH x3 3 x4 4 x5 5 x6 6 x7 7 x8 8;
rd.xpr> #    DO i=1 TO 100;
rd.xpr> #        x3=ranuni(3);
rd.xpr> #        x4=ranuni(5);
rd.xpr> #        x5=ranuni(7);
rd.xpr> #        x6=ranuni(9);
rd.xpr> #        x7=ranuni(11);
rd.xpr> #        x8=ranuni(13);
rd.xpr> #        output;
rd.xpr> #        END;
rd.xpr> #    DROP i;
rd.xpr> #    RUN;
rd.xpr> # PROC MEANS; RUN;
rd.xpr> # PROC COPY IN=work OUT=y;SELECT test format z;RUN; *Creates test2.xpt;
rd.xpr> # ------
rd.xpr> 
rd.xpr> # Read this dataset from a local file:
rd.xpr> ## Not run: 
rd.xpr> ##D w <- read.xport('test2.xpt')
rd.xpr> ## End(Not run)
rd.xpr> 
rd.xpr> # Or read a copy of test2.xpt available on the web:
rd.xpr> host <- 'http://biostat.mc.vanderbilt.edu'

rd.xpr> path <- '/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt'

rd.xpr> url <- paste(host,path,sep="")

rd.xpr> w <- read.xport(url)

rd.xpr> # We can also get the dataset wrapped in a list
rd.xpr> w <- read.xport(url, as.list=TRUE)

rd.xpr> # And we can ask for the format information to be included as well.
rd.xpr> w <- read.xport(url, as.list=TRUE, include.formats=TRUE)

rd.xpr> ## Don't show: 
rd.xpr> SASxport:::assert( is.data.frame(w)==FALSE && is.list(w)==TRUE )
> write.xport(list=base::list(w$test,w$z),file="a.xpt")
Warning message:
In write.xport(list = base::list(w$test, w$z), file = "a.xpt") :
  Replacing missing or invalid dataset names
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

> 
> # remove names
> example(read.xport)

rd.xpr> # -------
rd.xpr> # SAS code to generate test dataset:
rd.xpr> # -------
rd.xpr> # libname y SASV5XPT "test2.xpt";
rd.xpr> #
rd.xpr> # PROC FORMAT; VALUE race 1=green 2=blue 3=purple; RUN;
rd.xpr> # PROC FORMAT CNTLOUT=format;RUN;  * Name, e.g. 'format', unimportant;
rd.xpr> # data test;
rd.xpr> # LENGTH race 3 age 4;
rd.xpr> # age=30; label age="Age at Beginning of Study";
rd.xpr> # race=2;
rd.xpr> # d1='3mar2002'd ;
rd.xpr> # dt1='3mar2002 9:31:02'dt;
rd.xpr> # t1='11:13:45't;
rd.xpr> # output;
rd.xpr> #
rd.xpr> # age=31;
rd.xpr> # race=4;
rd.xpr> # d1='3jun2002'd ;
rd.xpr> # dt1='3jun2002 9:42:07'dt;
rd.xpr> # t1='11:14:13't;
rd.xpr> # output;
rd.xpr> # format d1 mmddyy10. dt1 datetime. t1 time. race race.;
rd.xpr> # run;
rd.xpr> # data z; LENGTH x3 3 x4 4 x5 5 x6 6 x7 7 x8 8;
rd.xpr> #    DO i=1 TO 100;
rd.xpr> #        x3=ranuni(3);
rd.xpr> #        x4=ranuni(5);
rd.xpr> #        x5=ranuni(7);
rd.xpr> #        x6=ranuni(9);
rd.xpr> #        x7=ranuni(11);
rd.xpr> #        x8=ranuni(13);
rd.xpr> #        output;
rd.xpr> #        END;
rd.xpr> #    DROP i;
rd.xpr> #    RUN;
rd.xpr> # PROC MEANS; RUN;
rd.xpr> # PROC COPY IN=work OUT=y;SELECT test format z;RUN; *Creates test2.xpt;
rd.xpr> # ------
rd.xpr> 
rd.xpr> # Read this dataset from a local file:
rd.xpr> ## Not run: 
rd.xpr> ##D w <- read.xport('test2.xpt')
rd.xpr> ## End(Not run)
rd.xpr> 
rd.xpr> # Or read a copy of test2.xpt available on the web:
rd.xpr> host <- 'http://biostat.mc.vanderbilt.edu'

rd.xpr> path <- '/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt'

rd.xpr> url <- paste(host,path,sep="")

rd.xpr> w <- read.xport(url)

rd.xpr> # We can also get the dataset wrapped in a list
rd.xpr> w <- read.xport(url, as.list=TRUE)

rd.xpr> # And we can ask for the format information to be included as well.
rd.xpr> w <- read.xport(url, as.list=TRUE, include.formats=TRUE)

rd.xpr> ## Don't show: 
rd.xpr> SASxport:::assert( is.data.frame(w)==FALSE && is.list(w)==TRUE )
> names(w) <- NULL
> write.xport(list=w,file="a.xpt")
Warning message:
In write.xport(list = w, file = "a.xpt") :
  Replacing missing or invalid dataset names
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `DATA1':
           dataset name      type format width                     label nobs
DATA1.RACE   DATA1 RACE character   RACE     8                              2
DATA1.AGE    DATA1  AGE   numeric            8 Age at Beginning of Study    2
DATA1.D1     DATA1   D1   numeric            8                              2
DATA1.DT1    DATA1  DT1   numeric            8                              2
DATA1.T1     DATA1   T1   numeric            8                              2

Variables in data set `DATA2':
         dataset name    type format width label nobs
DATA2.X3   DATA2   X3 numeric            8        100
DATA2.X4   DATA2   X4 numeric            8        100
DATA2.X5   DATA2   X5 numeric            8        100
DATA2.X6   DATA2   X6 numeric            8        100
DATA2.X7   DATA2   X7 numeric            8        100
DATA2.X8   DATA2   X8 numeric            8        100

Variables in data set `DATA3':
               dataset     name    type format width label nobs
DATA3.FMTNAME    DATA3  FMTNAME numeric  RFMTA     8          3
DATA3.START      DATA3    START numeric  RFMTB     8          3
DATA3.END        DATA3      END numeric  RFMTC     8          3
DATA3.LABEL      DATA3    LABEL numeric  RFMTD     8          3
DATA3.MIN        DATA3      MIN numeric            8          3
DATA3.MAX        DATA3      MAX numeric            8          3
DATA3.DEFAULT    DATA3  DEFAULT numeric            8          3
DATA3.LENGTH     DATA3   LENGTH numeric            8          3
DATA3.FUZZ       DATA3     FUZZ numeric            8          3
DATA3.PREFIX     DATA3   PREFIX numeric  RFMTE     8          3
DATA3.MULT       DATA3     MULT numeric            8          3
DATA3.FILL       DATA3     FILL numeric  RFMTF     8          3
DATA3.NOEDIT     DATA3   NOEDIT numeric            8          3
DATA3.TYPE       DATA3     TYPE numeric  RFMTG     8          3
DATA3.SEXCL      DATA3    SEXCL numeric  RFMTH     8          3
DATA3.EEXCL      DATA3    EEXCL numeric  RFMTI     8          3
DATA3.HLO        DATA3      HLO numeric  RFMTJ     8          3
DATA3.DECSEP     DATA3   DECSEP numeric RFMTBA     8          3
DATA3.DIG3SEP    DATA3  DIG3SEP numeric RFMTBB     8          3
DATA3.DATATYPE   DATA3 DATATYPE numeric RFMTBC     8          3
DATA3.LANGUAGE   DATA3 LANGUAGE numeric RFMTBD     8          3

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8         20
FORMATS.START    FORMATS    START character            8         20
FORMATS.END      FORMATS      END character            8         20
FORMATS.LABEL    FORMATS    LABEL character           16         20
FORMATS.MIN      FORMATS      MIN   numeric            8         20
FORMATS.MAX      FORMATS      MAX   numeric            8         20
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8         20
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8         20
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8         20
FORMATS.PREFIX   FORMATS   PREFIX character            8         20
FORMATS.MULT     FORMATS     MULT   numeric            8         20
FORMATS.FILL     FORMATS     FILL character            8         20
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8         20
FORMATS.TYPE     FORMATS     TYPE character            8         20
FORMATS.SEXCL    FORMATS    SEXCL character            8         20
FORMATS.EEXCL    FORMATS    EEXCL character            8         20
FORMATS.HLO      FORMATS      HLO character            8         20
FORMATS.DECSEP   FORMATS   DECSEP character            8         20
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8         20
FORMATS.DATATYPE FORMATS DATATYPE character            8         20
FORMATS.LANGUAGE FORMATS LANGUAGE character            8         20

> 
> # remove variable names
> example(read.xport)

rd.xpr> # -------
rd.xpr> # SAS code to generate test dataset:
rd.xpr> # -------
rd.xpr> # libname y SASV5XPT "test2.xpt";
rd.xpr> #
rd.xpr> # PROC FORMAT; VALUE race 1=green 2=blue 3=purple; RUN;
rd.xpr> # PROC FORMAT CNTLOUT=format;RUN;  * Name, e.g. 'format', unimportant;
rd.xpr> # data test;
rd.xpr> # LENGTH race 3 age 4;
rd.xpr> # age=30; label age="Age at Beginning of Study";
rd.xpr> # race=2;
rd.xpr> # d1='3mar2002'd ;
rd.xpr> # dt1='3mar2002 9:31:02'dt;
rd.xpr> # t1='11:13:45't;
rd.xpr> # output;
rd.xpr> #
rd.xpr> # age=31;
rd.xpr> # race=4;
rd.xpr> # d1='3jun2002'd ;
rd.xpr> # dt1='3jun2002 9:42:07'dt;
rd.xpr> # t1='11:14:13't;
rd.xpr> # output;
rd.xpr> # format d1 mmddyy10. dt1 datetime. t1 time. race race.;
rd.xpr> # run;
rd.xpr> # data z; LENGTH x3 3 x4 4 x5 5 x6 6 x7 7 x8 8;
rd.xpr> #    DO i=1 TO 100;
rd.xpr> #        x3=ranuni(3);
rd.xpr> #        x4=ranuni(5);
rd.xpr> #        x5=ranuni(7);
rd.xpr> #        x6=ranuni(9);
rd.xpr> #        x7=ranuni(11);
rd.xpr> #        x8=ranuni(13);
rd.xpr> #        output;
rd.xpr> #        END;
rd.xpr> #    DROP i;
rd.xpr> #    RUN;
rd.xpr> # PROC MEANS; RUN;
rd.xpr> # PROC COPY IN=work OUT=y;SELECT test format z;RUN; *Creates test2.xpt;
rd.xpr> # ------
rd.xpr> 
rd.xpr> # Read this dataset from a local file:
rd.xpr> ## Not run: 
rd.xpr> ##D w <- read.xport('test2.xpt')
rd.xpr> ## End(Not run)
rd.xpr> 
rd.xpr> # Or read a copy of test2.xpt available on the web:
rd.xpr> host <- 'http://biostat.mc.vanderbilt.edu'

rd.xpr> path <- '/cgi-bin/viewvc.cgi/*checkout*/Hmisc/trunk/tests/test2.xpt'

rd.xpr> url <- paste(host,path,sep="")

rd.xpr> w <- read.xport(url)

rd.xpr> # We can also get the dataset wrapped in a list
rd.xpr> w <- read.xport(url, as.list=TRUE)

rd.xpr> # And we can ask for the format information to be included as well.
rd.xpr> w <- read.xport(url, as.list=TRUE, include.formats=TRUE)

rd.xpr> ## Don't show: 
rd.xpr> SASxport:::assert( is.data.frame(w)==FALSE && is.list(w)==TRUE )
> colnames(w[[2]]) <- rep("", length=ncol(w[[2]]))
> write.xport(list=w,file="a.xpt")
Warning message:
In write.xport(list = w, file = "a.xpt") :
  Unnamed variables detected, using default names
> lookup.xport("a.xpt")

SAS xport file
--------------
Filename: `a.xpt'

Variables in data set `TEST':
          dataset name    type format width                     label nobs
TEST.RACE    TEST RACE numeric   RACE     8                              2
TEST.AGE     TEST  AGE numeric            8 Age at Beginning of Study    2
TEST.D1      TEST   D1 numeric            8                              2
TEST.DT1     TEST  DT1 numeric            8                              2
TEST.T1      TEST   T1 numeric            8                              2

Variables in data set `Z':
       dataset name    type format width label nobs
Z.VAR1       Z VAR1 numeric            8        100
Z.VAR2       Z VAR2 numeric            8        100
Z.VAR3       Z VAR3 numeric            8        100
Z.VAR4       Z VAR4 numeric            8        100
Z.VAR5       Z VAR5 numeric            8        100
Z.VAR6       Z VAR6 numeric            8        100

Variables in data set `FORMATS':
                 dataset     name      type format width label nobs
FORMATS.FMTNAME  FORMATS  FMTNAME character            8          3
FORMATS.START    FORMATS    START character           16          3
FORMATS.END      FORMATS      END character           16          3
FORMATS.LABEL    FORMATS    LABEL character            8          3
FORMATS.MIN      FORMATS      MIN   numeric            8          3
FORMATS.MAX      FORMATS      MAX   numeric            8          3
FORMATS.DEFAULT  FORMATS  DEFAULT   numeric            8          3
FORMATS.LENGTH   FORMATS   LENGTH   numeric            8          3
FORMATS.FUZZ     FORMATS     FUZZ   numeric            8          3
FORMATS.PREFIX   FORMATS   PREFIX character            8          3
FORMATS.MULT     FORMATS     MULT   numeric            8          3
FORMATS.FILL     FORMATS     FILL character            8          3
FORMATS.NOEDIT   FORMATS   NOEDIT   numeric            8          3
FORMATS.TYPE     FORMATS     TYPE character            8          3
FORMATS.SEXCL    FORMATS    SEXCL character            8          3
FORMATS.EEXCL    FORMATS    EEXCL character            8          3
FORMATS.HLO      FORMATS      HLO character            8          3
FORMATS.DECSEP   FORMATS   DECSEP character            8          3
FORMATS.DIG3SEP  FORMATS  DIG3SEP character            8          3
FORMATS.DATATYPE FORMATS DATATYPE character            8          3
FORMATS.LANGUAGE FORMATS LANGUAGE character            8          3

> 
